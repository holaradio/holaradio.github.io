<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Radio Hôla – Intranät</title>
  <!-- Modern UI font -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style2.css">
  <link rel="stylesheet" href="../css/anslagstavla.css">
  <script src="../js/radio-schema.js"></script>
</head>
<body>
  <script>
    (function(){
      function getCookie(name){
        const m = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
        return m ? decodeURIComponent(m[2]) : null;
      }
      // cookie name must match whatever you set on successful login (e.g. 'auth')
      const auth = getCookie('auth');
      if (!auth) {
        // not logged in -> redirect to contact/login page
        location.replace('../kontakt.html');
      }
      if (auth && auth.length < 8) location.replace('../kontakt.html');
    })();
  </script>

  <div id="wrapper">
    <div id="header">
      <a href="/intra" class="logo-a"><img src="/images/radiohola2.png" alt="Radio Hôlas logotype" srcset="../images/radiohola_intra.svg" class="logo"/></a>
      <h1>Anslagstavlan</h1>
    </div>

    <div id="nav">
      <script>
        fetch('nav.html')
          .then(response => response.text())
          .then(html => document.getElementById('nav').innerHTML = html);
      </script>
    </div>
     <div id="content-fp">
        <section class="anslagstavla-container">
          <h2>Anslagstavlan</h2>
          <div id="anslagstavla" class="anslagstavla"></div>
        </section>

        <script src="/js/anslagstavla.js"></script>


<script>
  document.addEventListener("DOMContentLoaded", () => {
    const tavla = document.getElementById("anslagstavla");
    const form = document.getElementById("nytt-meddelande-form");

    // Förifyllda meddelanden
    const meddelanden = [
      {
        rubrik: "Borttappad katt!",
        innehall: "Liten grå katt med vit tass försvunnen vid ICA Hôla.",
        avsandare: "Greta K."
      },
      {
        rubrik: "Musikkväll på Folkets Hus",
        innehall: "Fredag 19:00 – Ta med instrument, alla är välkomna!",
        avsandare: "Stig & Dragspelsgänget"
      },
      {
        rubrik: "Cykel säljes",
        innehall: "Crescent 3-växlad, nymålad. 500 kr.",
        avsandare: "Röjgen"
      }
    ];

    function visaMeddelanden() {
      tavla.innerHTML = "";
      meddelanden.forEach(medd => {
        const el = document.createElement("div");
        el.classList.add("meddelande");
        el.style.setProperty("--rotation", (Math.random() * 10 - 5) + "deg");

        el.innerHTML = `
          <h4>${medd.rubrik}</h4>
          <p>${medd.innehall}</p>
          <div class="avsandare">– ${medd.avsandare}</div>
        `;
        tavla.appendChild(el);
      });
    }

    form.addEventListener("submit", e => {
      e.preventDefault();
      const rubrik = document.getElementById("rubrik").value.trim();
      const innehall = document.getElementById("innehall").value.trim();
      const avsandare = document.getElementById("avsandare").value.trim();

      if (!rubrik || !innehall || !avsandare) return;

      meddelanden.unshift({ rubrik, innehall, avsandare });
      visaMeddelanden();
      form.reset();
    });

    visaMeddelanden();
  });
</script>
<!-- === ANSLAGSTAVLA SLUT === -->

     </div>
     

   
  <div id="footer">
    © 2014 Radio Hôla | 68,7 Mhz
  </div>
    
  <script src="../js/login.js"></script>
</body>
</html>
