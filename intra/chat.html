<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Radio Hôla – Intranät</title>
  <link rel="stylesheet" href="../css/style2.css">
</head>
<body>
  <script>
    (function(){
      function getCookie(name){
        const m = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
        return m ? decodeURIComponent(m[2]) : null;
      }
      // cookie name must match whatever you set on successful login (e.g. 'auth')
      const auth = getCookie('auth');
      if (!auth) {
        // not logged in -> redirect to contact/login page
        location.replace('../kontakt.html');
      }
      if (auth && auth.length < 8) location.replace('../kontakt.html');
    })();
  </script> 

   <div id="wrapper">
    <div id="header">
      <a href="/intra" class="logo-a"><img src="/images/radiohola2.png" alt="Radio Hôlas logotype" srcset="../images/radiohola_intra.svg" class="logo"/></a>
      <h1>Medarbetarchatt</h1>
    </div>

    <div id="nav">
      <script>
        fetch('nav.html')
          .then(response => response.text())
          .then(html => document.getElementById('nav').innerHTML = html);
      </script>
    </div>
     <div id="content-fp">
        <h2>Medarbetarchatt</h2>
        <div class="update-box" aria-hidden="false">
          <button type="button" class="update-toggle" aria-expanded="false" aria-controls="update-content">
            Uppdatering 23/11
            <span class="chev" aria-hidden="true">▸</span>
          </button>
          <div id="update-content" class="update-content" hidden>
            <p>På grund av att företaget som utvecklar chattapplikationen är baserad i Gruvvik rekommenderas ni att använda ett lösenord som ni inte använder någon annanstans. Hör av dig till mig om du vill bli administratör. Det gäller dock inte dig, Röjgen.</p>
            <p>Till dig som är administratör: om du inte ser admin-gränssnittet, uppdatera sidan.</p>
            <p>/Rootmar</p>
          </div>
        </div>
        <hr class="update-sep">
        <div id="chat" aria-live="polite">
          <!-- status area (auth / hints) -->
          <div id="chat-status" style="margin-bottom:.5em;color:#444;font-size:.95rem"></div>

          <div id="chat-messages" style="max-height:60vh;overflow:auto;padding:0.5em;border:1px solid #666;background:#fff;color:#000;"></div>

          <form id="chat-form" style="margin-top:.5em;display:flex;gap:.5em">
            <input id="chat-name" type="text" placeholder="Ditt namn" style="flex:0 0 150px" required>
            <input id="chat-text" type="text" placeholder="Skriv meddelande..." style="flex:1" autocomplete="off" required>
            <button id="chat-send" type="submit">Skicka</button>
          </form>
        </div>
     </div>
     

   
  <div id="footer">
    © 2014 Radio Hôla | 68,7 Mhz
  </div>
  <script>
    // Toggle the update box (delegated click)
    document.addEventListener('click', (e) => {
      const btn = e.target.closest && e.target.closest('.update-toggle');
      if (!btn) return;
      const id = btn.getAttribute('aria-controls');
      const content = id ? document.getElementById(id) : null;
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      if (content) content.hidden = expanded;
    });
  </script>
  <script src="../js/login.js"></script>
  <script src="../js/chat-firebase.js"></script>
</body>
</html>
